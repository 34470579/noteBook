# 面试

时间点：2017-11，一个16年毕业生所经历的面试

## 一、什么是面试

说到面试，还是先说你为什么要离职，
- [什么情况下你会毫不犹豫地辞职？][1]浏览数已经达到51826523次了，5000w+，o_o！

关键字：成长、发展、委屈、领导、钱（工资）`突发感想是不是可以抓取下然后分析关键字，哈哈哈`

还有
- [「宁愿花 11K 重新招人，也不愿意花 9K 留住老员工」的现象是否属实？为什么会出现该现象？][2]

还想看吗
- [离职前一定要找好下家吗？公司招聘时一般如何看待裸辞和骑驴找马？][3]

我的理解：面试不是高考，高考只有一次（不说补习），面试可以有n次，只要有面试机会，你就可以一直去面，面到吐为止都没关系，不要怕失败，
公司没选择你不是你不优秀，而是你不符合他们的要求，回家思考下面试不足的地方，调整下心态，准备下个面试才是你正确的做法。

## 二、面试准备

准备是多方面的，俗话说：成功只留给有准备的人

**1. 问：什么时候开始准备？**

你是牛人吗 ? 不用准备，等猎头挖 : 老老实实的随时准备好   

**2. 问：怎么准备？**

- 项目经验是一部分：面试是离不开的，充分理解自己所做的那部分，能在面试中清楚的表述出自己做了什么，充当什么样的角色
- 自己分享知识的地方：比如博客/github，自己总结的会比去看别人的总结效果好不只一丁半点
- 基础知识：字符串操作、数组操作、文件操作、正则操作
- 进阶知识：面向对象、数据结构和算法、设计模式、mysql索引、mysql引擎、mysql事务、mysql锁
- 高阶知识：linux+nginx+mysql+php+redis **优化**，只会操作没用，谁都会，高并发、分布式系统、负载均衡、分库分表、消息队列

## 三、面试干货

### 1、某教育机构

**mysql事务是什么**

```php
我说了mysql的四个特性，原子性、一致性、隔离性、持久性，事务可以理解成一次操作要不完成要不失败。
面试官问了隔离性和锁的问题，有点忘了，这个真没答上来，可以参考下《Innodb中的事务隔离级别和锁的关系》https://tech.meituan.com/innodb-lock.html
```

**php代码解释过程**

```php
我说了通过zend引擎解析成opcode，然后转化成机器识别的代码。
平时确实没有去关注这个，失败失败，查了资料，鸟哥写的《深入理解PHP原理之Opcodes》http://www.laruence.com/2008/06/18/221.html
```

**百度统计的实现原理**

```php
我没答上来，自己后面查的
参考：http://blog.csdn.net/iqzq123/article/details/8877645
```

**如何共享session**

```php
我说了通过redis存储session，以达到共享目的，后面查了下方案，还挺多的
参考：http://www.cnblogs.com/wangtao_20/p/3395518.html#commentform
```

**git分支管理策略**

```php
我写了master作为主分支，dev作为开发分支，bug_fix分支作为bug分支
面试官说有个临时bug需要改，而我们在dev上已经开发了很多内容了，我答的是用bug_fix分支拉master代码，再合回去，面试官说dev怎么办，改了相同的模块会冲突
想了下，确实会，然后求教面试官，面试官说可以用git rebase变基实现，自己见过这个命令，但是没用过，尴尬
```
**restful设计**

```php
我说了get、post、put、patch、delete，面试官问他们分别怎么用，毕竟自己做api的，就回答了get是从服务器取资源、post是新建资源、put是
更新完整资源、patch更新部分资源、delete是删除资源，就过了
```

**附加题：论坛的表设计**

```php
有点忘了，我答的不是很好，问的是有以下几个需求，请问需要建几张表，为什么？主要考的如何合理的设计表，比如用户登录信息表可以怎样设计？发帖表
和回帖表需要怎样设计？内容字段比较大，怎样设计更好？哪些字段需要加索引？
```

**情景题：一个登录系统的改进**

```php
用伪代码实现
第一步：PC端只有两个表单框和注册按钮，后端接收参数，再存入数据库
第二步：添加移动端，需要发送短信
第三步：加入第三方登陆方式，需要发送邮件
第四步：有个兄弟公司，给了我们一张execl表，里面是用户信息，需要后台注册这些用户，如何修改现有的代码
第四步：有点忘了，好像是如何进一步优化

这里第三步就答不好了，考察的是逻辑能力和代码组织能力，设计模式的重要性。
```

**自己最满意的代码**
```php
自己自由发挥，项目中遇到的应该是最好答的
```

**了解哪些设计模式，实际用例**
```php
我的回答
工厂模式：定义一个标准，用到的类可以按这个标准实现相应功能
单例模式：防止重复实例化，减少资源调用
数据映射：数据库ORM应用
装饰器模式：兼容老数据，多态的应用

面试管问了怎么兼容老数据，考察codereview能力
```

困了，先到这里

---

### 2、某电商公司

笔试题挺有意思的，比较能考察出我这样的面试者水平

笔试题的解法见[php7.php](php/php7.php)文件中的24、25、26

**将一个二维数组的值首字母大写**

```php
题目意思大概是这样的，印象不深很清了
当时做的时候好像做错了，现在想了下，思路是获取键值和值，然后双重循环转大写即可。
```

**使用正则获取html里的href属性的值和a标签内的值，并以href值为key，a标签内的值为value存入二维数组中**

大概是这样的结构，我简化了
```php
<ul class="attr">
    <li>
        <a href="www.baidu.com">百度baidu</a>
        <a href='www.tecent.com'>腾讯tengxun</a>
        <a href="www.alibaba.com">阿里巴巴alibaba</a>
    </li>
</ul>

考察正则表达式的运用和数组的拼装，我当时做的稀烂，回去稍微看了下正则，就很容易了。
```

**优化语句查询**

test表中数据有500w，字段有id/t_id/type_id/plat_id，语句为`select max(t_id) from test where type_id=1 and plat_id=1`
```php
考察mysql语句优化，这里主要是优化max函数，max函数会导致全表扫描，效率会很低，可以使用order by加limit进行优化

我是这样答的
select t_id from test where type_id=1 and plat_id=1 order by t_id limit 1;
当然还可以使用加索引进一步优化速度，这里可以加上(type_id/plat_id)联合索引。
```

**找出N个数中的第M大的数**

```php
考察算法，貌似是查找？
我当时的想法是先对数组排序，然后索引的N-M的数就是M大的数
```

**Ajax跨域请求时，会出现什么问题？如何解决**

```php
我的回答：稀烂，跨域出现问题会出现请求拒绝，是出于安全起见，设置Access-Control-Allow-Origin为*即可。哈哈哈naive
回去搜了下，方案还挺多的。
参考https://dailc.github.io/2017/03/22/ajaxCrossDomainSolution.html
```

**如何优化一个CPU运算密集的网站**
```php
没有实践过对吧，没关系，会google吗？会背吗？脑子能留个大概的原理吗？
```

**自己最满意的代码**
```php
自己自由发挥，项目中遇到的应该是最好答的
```

**其它**

简历上的项目询问，项目中最有难度的地方？如何解决的？

困了，睡

## 四、面试总结


[1]:https://www.zhihu.com/question/50056807
[2]:https://www.zhihu.com/question/63878469
[3]:https://www.zhihu.com/question/20029279