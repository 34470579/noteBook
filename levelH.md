# 3年经验PHP准备面试

## 1、PHP的垃圾回收机制以及大概实现

使用的是`引用计数`

PHP底层数据结构`zval`中有个字节`refcount`，用以表示指向这个zval的变量个数，初始化是1，当php文件执行结束或使用`unset()`函数，`refcount`变为0时就会自动被系统销毁，实现垃圾回收

## 2、PHP7比PHP5节省资源（内存占用），大概是如何实现的

PHP7优化了底层的数据结构和对Zend引擎的优化

## 3、PHP是弱语言类型，那么PHP中是如何实现类型转换的

PHP的底层有个联合体`_zend_value`表示变量的类型，程序运行期间会根据自己的类型选择使用不同的成员

## 4、一个APP或者网页从发起并完成一个完整的HTTP流程大概是怎样的

- 通过DNS服务器解析域名得到IP地址
- 通过IP地址确定服务器
- 客户端使用http协议与服务器进行三次握手连接
- 服务器通常使用nginx代理到相应的服务（比如php-fpm）
- 服务进行解析返回数据到客户端

## 5、MYSQL的innodb引擎和MYISAM引擎有何不同，说出主要不同点

- innodb支持行锁、事务、外键，而myisam只支持表锁
- innodb是聚簇索引，myisam是非聚簇索引
- 在查询效率上myisam更快

## 6、MYSQL的innodb引擎中，聚簇索引和二级索引有什么不同，如何可以，请详细画出两种索引实现的数据结构以及不同

二级索引的叶子节点存的是主键值，而不是行指针

## 7、MYSQL的事务有几种隔离级别，分别是为了解决什么问题而出现

4中隔离级别：

- 未提交读
- 提交读，不可重复读 RC
- 可重复读 RR
- 可串行化

主要是RC和RR，RC解决了脏读，是一个事务只能看到自己的修改，其它事务是看不到的，RR解决了不可重复读，同一个事务中多次读取同样的记录的结果是一样的。

## 8、MYSQL的锁是怎么回事，和事务之间有什么千丝万缕的联系

数据库事务有不同的隔离级别，不同的隔离级别对锁的使用是不同的，锁的应用最终导致不同事务的隔离级别。

https://www.zhihu.com/question/23242151

## 9、REDIS中常见的数据结构有几种？REIDS数据持久化有几种方案

- string 字符串
- list 列表
- set 集合
- zset 有序集合
- hash 哈希

持久化有：

- rdb 保存数据库中的键值对 rdb恢复更快，因为aof执行命令时间长
- aof 保存服务器所执行的命令 优先aof

## 10、简述一下REDIS中，字符串、set、zset、list以及hash底层是如何实现的

## 11、REDIS中key的过期有几种策略，然后redis中key的过期是如何实现的

三种过期策略：

- 定时删除 设置一个定时器，到了时间自动删除
- 懒汉式式删除 获取key时进行删除
- 定期删除 每隔一段时间进行key删除

## 12、你对微服务了解多少，如果你的经历中有这些信息，结合你的经历说说你们微服务是怎么做的

## 13、RPC了解多少，如果你经历过，结合你的经历说下你们RPC是通过什么协议实现的？消息格式是怎样的？采用哪种序列化方式

## 14、TCP协议握手的过程

三次握手，四次挥手

- 发送端发送syn标志的数据包给接收端
- 接收端返回syn/ack标志的数据包给发送端
- 发送端返回ack标志的数据包给接收端

## 15、PHP异常你是如何使用的，简单说说

- 网络请求接口
- 耗时的计算
- 数据库连接

通过捕捉异常避免系统崩溃，同时输出错误信息到日志有助于排查

## 16、SWOOLE的进程模型是什么样的？和LNMP有什么不同

## 17、同步、异步、阻塞、非阻塞和IO多路复用是怎么回事，常见的服务器进程（线程）模型有哪些

## 18、计算机基础中常见的基础数据结构和基础算法

## 19、哈希一致性算法是怎么回事？同时说下redis集群有什么认识吗